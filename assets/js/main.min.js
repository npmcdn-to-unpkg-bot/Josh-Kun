$("input[type=checkbox], input[type=radio]").checkbox();
$('.wallpaper').background();
$('.carousel').carousel();
$('.swap-item').swap();

$(window).resize(function(){

	var wh = $(window).height();

	$('.hero--wh').css({
		height: wh,
	});

}).resize();

setTimeout(function(){
  var percent = .5;
  if($('body').hasClass('animate')) {
  	$('body').loadie(percent);
  	//$('#home--intro').addClass('is-loaded');
  	//$('#home--projects').addClass('is-loaded');
  }
}, 2500);
  
setTimeout(function(){
  var percent = 1;
  if($('body').hasClass('animate')) {
  	$('body').loadie(percent);
  	$('#home--intro').addClass('is-loaded');
    $('#home--projects').addClass('is-loaded');
	}
}, 5000);
  

var f = (function () {
	
	var $project 				=	$('.project__item-wrapper');
	var $windowHeight 	= $(window).height();
	var $projectWrap 		= $('.project-wrapper').height();
	var $projectIdeal		= $windowHeight-120;
	var $projectHeight 	= $project.outerHeight();
	var $projectCount 	= Math.floor($projectIdeal/$projectHeight)-4;
	var $calcHeight			= $projectHeight*$projectCount;

	//$('.project__item-wrapper').unwrap();

	var divs = $project;
	for(var i = 0; i < divs.length; i+=$projectCount) {
		divs.slice(i, i+$projectCount).wrapAll("<div class='carousel__slide'></div>");
	}

	//console.log('Window Height:', $windowHeight);
	//console.log('Project Wrapper Height:', $projectIdeal);
	//console.log('Project Height:', $projectHeight);
	//console.log('Project Count:', $projectCount);

	$('.carousel--custom').carousel();

});

var d = (function () {

	$('body').css('overflow', 'hidden' );
	$('.project-wrapper').css('opacity', 0 );
	//setTimout(function(){
		var $project 				=	$('.project__item-wrapper');
		var $windowHeight 	= $(window).height();
		var $projectWrap 		= $('.project-wrapper').height();
		var $projectIdeal		= $windowHeight-120;
		var $projectHeight 	= $project.outerHeight();
		var $projectCount 	= Math.floor($projectIdeal/$projectHeight)-4;
		var $calcHeight			= $projectHeight*$projectCount;

		setTimeout(function(){
			$('.carousel--custom').carousel('disable');
			$('.project__item-wrapper').unwrap();

			var divs = $project;
			for(var i = 0; i < divs.length; i+=$projectCount) {
				divs.slice(i, i+$projectCount).wrapAll("<div class='carousel__slide'></div>");
			}
		},300);

	setTimeout(function(){
		$('.carousel--custom').carousel('enable');
		$('.project-wrapper').css({
			opacity: 1
		});
		$('body').css('overflow', 'scroll' );
	},700);

});

if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) { } else {
	$(document).ready(f);
	$(window).resize(d);	
}


//$('.project__item-wrapper').each(function() {
//  $this = $(this);
//  if ($.inArray($this.data('title'), myArray) !== -1) {
//    $this.children('.status').text('New text value');
//  }
//});

$('.project__item-wrapper').hover(
	function() {
		var titleAttr = $(this).data('title');
		$(".project-images__project[data-title='" + titleAttr + "']").stop(true, true).addClass('is-visible');
	},
	function() {
		$(".project-images__project").stop(true, true).removeClass('is-visible');
	}
);

// @codekit-prepend "site/default-ui.js"
// @codekit-prepend "site/hero.js"
// @codekit-prepend "site/homepage.js"
// @codekit-prepend "site/projects.js"

function mobileMenu(){
	// Clone that thing
	var a = $('#header-navigation').html();
	var b = $('#mobile-menu_container').html(a);
	$('#mobile-menu_container a').removeClass('btn-nav').addClass('btn-mobile');
	$(".mobile-toggle").swap();
}

function openModal(){
	$('.ajax-link').magnificPopup({
		type: 'ajax',
		midClick: true,
		removalDelay: 1000,
		alignTop: true,
		overflowY: 'scroll',
		modal: true,
		mainClass: 'mfp-slideup fs-grid',
		callbacks: {
		  parseAjax: function(mfpResponse) {
		    mfpResponse.data = $(mfpResponse.data).find('#page');
		  },
		  ajaxContentAdded: function() {
		  	$('body').addClass('is-viewing');
		  },
		  beforeClose: function() {
		  	$('body').removeClass('is-viewing');	
		  }
		}
	});
	$(document).on('click', '.popup-modal-dismiss', function (e) {
		e.preventDefault();
		$.magnificPopup.close();
	});
}

$(document).ready(function(){
	mobileMenu();
	openModal();
	$('body').flowtype({
		//minimum   : 500,
		//maximum   : 1200,
		minFont   : 16,
		//maxFont   : 80,
		fontRatio : 85
	});
});



